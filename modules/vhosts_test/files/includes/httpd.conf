   <Directory /x1/www/httpd.apache.org/content/docs/1.3>
     SSILegacyExprParser on
     <Files ~ "\.html">
         SetOutputFilter INCLUDES
     </Files>
   </Directory>

  <DirectoryMatch "/var/www/httpd.apache.org/content/docs/(2\.[0-6]|trunk)">
    Options -Multiviews
    <Files *.html>
        SetHandler type-map
    </Files>
    # .tr is text/troff in mime.types!
    <Files *.html.tr.utf8>
        ForceType "text/html; charset=utf-8"
    </Files>

    # Tell mod_negotiation which language to prefer
    SetEnvIf Request_URI   ^/docs/(?:2\.[0-6]|trunk|current)/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)/ \
        prefer-language=$1

    # Deal with language switching (/docs/2.0/de/en/... -> /docs/2.0/en/...)
    RedirectMatch 301 ^(/docs/(?:2\.[0-6]|trunk|current))(?:/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)){2,}(/.*)?$ \
        $1/$2$3
  </DirectoryMatch>

  <DirectoryMatch "/var/www/httpd.apache.org/content/mod_ftp/[\w.]+">
    Options -Multiviews
    <FilesMatch "^[^.]+\.html$">
        SetHandler type-map
    </FilesMatch>
    #  .tr is text/troff in mime.types!
    <Files *.html.tr.utf8>
        ForceType "text/html; charset=utf-8"
    </Files>

    # Tell mod_negotiation which language to prefer
    SetEnvIf Request_URI   ^/mod_ftp/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)/ \
        prefer-language=$1

    # Deal with language switching (/mod_ftp/de/en/... -> /mod_ftp/en/...)
    RedirectMatch 301 ^(/mod_ftp)(?:/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)){2,}(/.*)?$ \
        $1/$2$3

    # Now fail-over for all not-found's from /mod_ftp/... into /docs/trunk/...
    # since we point to httpd doc pages for reference.
    RewriteEngine On
    RewriteBase /mod_ftp
    RewriteOptions inherit
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.+) http://httpd.apache.org/docs/trunk/$1 [R=301,L]
  </DirectoryMatch>

  <DirectoryMatch "/var/www/httpd.apache.org/content/mod_fcgid/[\w.]+">
    Options -Multiviews
    <FilesMatch "^[^.]+\.html$">
        SetHandler type-map
    </FilesMatch>
    #  .tr is text/troff in mime.types!
    <Files *.html.tr.utf8>
        ForceType "text/html; charset=utf-8"
    </Files>

    # Tell mod_negotiation which language to prefer
    SetEnvIf Request_URI   ^/mod_fcgid/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)/ \
        prefer-language=$1

    # Deal with language switching (/mod_fcgid/de/en/... -> /mod_fcgid/en/...)
    RedirectMatch 301 ^(/mod_fcgid)(?:/(da|de|en|es|fr|ja|ko|pt-br|ru|tr|zh-cn)){2,}(/.*)?$ \
        $1/$2$3

    # Now fail-over for all not-found's from /mod_fcgid/... into /docs/trunk/...
    # since we point to httpd doc pages for reference.
    RewriteEngine On
    RewriteBase /mod_fcgid
    RewriteOptions inherit
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.+) http://httpd.apache.org/docs/trunk/$1 [R=301,L]
  </DirectoryMatch>


